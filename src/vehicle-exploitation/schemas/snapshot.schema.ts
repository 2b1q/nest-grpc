import * as mongoose from 'mongoose';

const SnapshotDataSchema = new mongoose.Schema({
  weight: Number,
  lifted: Boolean,
  axisId: Number,
});

export const SnapshotSchema = new mongoose.Schema({
  // UUID
  id: {
    type: String,
    index: true,
    unique: true,
  },
  vehicleId: String, // link to Vehicle
  timestamp: Date,
  updated: { type: Date, default: Date.now },
  totalWeight: Number,
  cargoWeight: Number,
  data: [SnapshotDataSchema],
});

// { "id": 1936, "timestamp": "Mon Jul 22 2019 15:57:14 GMT+0200 (Central European Summer Time)",
// "totalWeight": 8404, "cargoWeight": 6034,
//  "data": [{ "weight": 0, "lifted": true, "axisId": 1 }, { "weight": 0, "lifted": true, "axisId": 2 }, { "weight": 2011, "lifted": false, "axisId": 3 }, { "weight": 0, "lifted": true, "axisId": 4 }, { "weight": 0, "lifted": true, "axisId": 5 }, { "weight": 2011, "lifted": false, "axisId": 6 }, { "weight": 0, "lifted": true, "axisId": 7 }, { "weight": 2011, "lifted": false, "axisId": 8 }] }
